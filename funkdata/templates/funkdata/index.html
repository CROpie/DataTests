<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset='utf-8'>
        <title>Function Database</title>
        <script src="../../static/funkdata/script2.js" defer></script>
        <link rel="stylesheet" href="../../static/funkdata/styles.css">
    </head>

<body>
<h1>Choose programming language</h1>

<!-- Initialize the language choice drop-down menu-->
<div id="lang-menu-container">
    <select name="type" id="lang-menu" onchange=showFunctionTypes(this.value)>
            <option class="language" value="lang-default">Choose Language</option>
            {% for language in LFTDjango.keys %}
                <option class="language" id="language-{{ language }}" value="{{ language }}">{{ language }}</option> 
            {% endfor %}
    </select>
</div>

<!-- Initialize the function_type choice drop-down menus for each language-->
{% for language, function_types in LFTDjango.items %}
    <div id="{{language}}-type-container" class="language-type-container">

    {% for function_type, function_names in function_types.items %}
        <select class="function-menu" onchange=showFunctionData(this.value)>
            <option value="func-default" >{{ function_type }}</option>
            {% for function_name in function_names %}
                <option value="{{ language }},{{ function_type }},{{ function_name }}" >{{ function_name }}</option>
            {% endfor %}
        </select>
    {% endfor %}
    </div>
{% endfor %}





<script>

    let data = JSON.parse("{{LFTJson|escapejs}}");    

    function showFunctionTypes(functionlanguage) {
        if (functionlanguage === "lang-default") {
            return;
        } else {
            document.querySelectorAll('.language-type-container').forEach(container => {
                container.style.display = 'none';
            })

            showdropdowns = document.getElementById(`${functionlanguage}-type-container`);
            showdropdowns.style.display = "flex";
        }
    }

    function showFunctionData(functiontype) {
        if (functiontype === "func-default") {
            return;
        } else {
            k = functiontype.split(",");
            lang=data[k[0]];
            type=lang[k[1]];
            name=type[k[2]];
            data = name.split(",");
            syntax=data[0];
            parameters=data[1];
            returnvalue=data[2];
        }
    }

</script>
</body>
</html>